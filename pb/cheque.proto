syntax = "proto3";
package pb;

option go_package = "../pb";

message Purchase {
	string operator_address = 1; // operator
	string user_address = 2;	// user
	string token_address = 3;	// token

	uint32 purchase_amount = 4;
	uint32 node_nonce = 5;
}

message Cheque {
	Purchase purchase = 1;
	bytes purchase_sig = 2; //运营商对purchase的签名

	string cash_address = 3; //运营合约地址
	string user_address = 4; //user地址
	string storage_address = 5; //storage

	uint32 pay_amount = 6; //支付给存储节点的数额必须小于等于cheque.max_amount
}

message ChequeBatch {
	string cheque_batch_to = 1; //存储节点号
	uint32 cheque_batch_value = 2; //聚合后的支票面额
	uint32 min_nonce = 3; //聚合的nonce最小值
	uint32 max_nonce = 4; //聚合的nonce最大值
}
